<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Algeria - تطبيق التواصل باللهجة الجزائرية</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #2a5298, #1a2a6c);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-attachment: fixed;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(12px);
            border-radius: 24px;
            padding: 30px;
            box-shadow: 0 12px 36px rgba(0, 0, 0, 0.4);
            margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .header-content {
            position: relative;
            z-index: 2;
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 12px;
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        header p {
            color: #d0e1f9;
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .logo {
            font-size: 5rem;
            margin-bottom: 25px;
            color: #ff7e5f;
            position: relative;
            display: inline-block;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .logo::after {
            content: "🇩🇿";
            position: absolute;
            bottom: 5px;
            right: -15px;
            font-size: 2rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }
        
        .input-container {
            margin-bottom: 25px;
            position: relative;
        }
        
        .input-container label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #ff7e5f;
            font-size: 1.1rem;
        }
        
        textarea {
            width: 100%;
            min-height: 160px;
            padding: 18px;
            border-radius: 16px;
            border: 2px solid rgba(58, 97, 134, 0.6);
            background: rgba(255, 255, 255, 0.06);
            color: #fff;
            font-size: 1.1rem;
            resize: vertical;
            transition: all 0.3s;
        }
        
        textarea:focus {
            outline: none;
            border-color: #ff7e5f;
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 0 4px rgba(255, 126, 95, 0.2);
        }
        
        .button-container {
            text-align: center;
            margin: 30px 0;
        }
        
        button {
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 20px rgba(254, 180, 123, 0.5);
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        button:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(254, 180, 123, 0.7);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button:disabled {
            background: linear-gradient(90deg, #555, #333);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .response-container {
            background: rgba(255, 255, 255, 0.07);
            border-radius: 16px;
            padding: 25px;
            margin-top: 25px;
            min-height: 180px;
            border: 2px solid rgba(58, 97, 134, 0.6);
            transition: all 0.3s;
        }
        
        .response-container:hover {
            background: rgba(255, 255, 255, 0.09);
        }
        
        .response-container h3 {
            color: #ff7e5f;
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            font-size: 1.3rem;
        }
        
        .response-container h3 i {
            margin-left: 12px;
        }
        
        #responseText {
            line-height: 1.7;
            font-size: 1.1rem;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 25px 0;
        }
        
        .loading i {
            font-size: 2.5rem;
            color: #ff7e5f;
            animation: spin 1.5s linear infinite;
        }
        
        .loading p {
            margin-top: 15px;
            font-size: 1.1rem;
            color: #d0e1f9;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            padding: 18px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
            border-left: 4px solid #ff6b6b;
            font-size: 1.1rem;
        }
        
        .success {
            color: #4ecdc4;
            background: rgba(78, 205, 196, 0.1);
            padding: 18px;
            border-radius: 12px;
            margin: 25px 0;
            display: none;
            border-left: 4px solid #4ecdc4;
            font-size: 1.1rem;
        }
        
        footer {
            margin-top: 50px;
            text-align: center;
            color: #a0b9e9;
            font-size: 1rem;
            width: 100%;
        }
        
        .algerian-theme {
            position: absolute;
            top: 15px;
            left: 15px;
            display: flex;
            gap: 8px;
            z-index: 10;
        }
        
        .algerian-theme span {
            font-size: 2rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }
        
        .dev-info {
            text-align: center;
            margin-top: 20px;
            color: #feb47b;
            font-size: 1rem;
            padding: 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            border: 1px solid rgba(254, 180, 123, 0.3);
        }
        
        .features {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .feature {
            background: rgba(255, 255, 255, 0.06);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            width: 150px;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .feature:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .feature i {
            font-size: 2rem;
            color: #ff7e5f;
            margin-bottom: 10px;
        }
        
        .feature p {
            font-size: 0.9rem;
            color: #d0e1f9;
        }
        
        .chat-history {
            margin-top: 30px;
            max-height: 200px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 15px;
            display: none;
        }
        
        .chat-history h4 {
            color: #ff7e5f;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .history-item {
            padding: 10px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .history-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .toggle-history {
            background: rgba(255, 126, 95, 0.2);
            color: #ff7e5f;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 15px;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        
        .toggle-history:hover {
            background: rgba(255, 126, 95, 0.3);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                border-radius: 20px;
            }
            
            header h1 {
                font-size: 2.2rem;
            }
            
            .logo {
                font-size: 4rem;
            }
            
            button {
                width: 100%;
                padding: 16px;
            }
            
            .features {
                gap: 10px;
            }
            
            .feature {
                width: 130px;
                padding: 12px;
            }
        }
        
        /* تخصيص شريط التمرير */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 126, 95, 0.5);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 126, 95, 0.7);
        }
    </style>
</head>
<body>
    <div class="algerian-theme">
        <span>🇩🇿</span>
        <span>☪</span>
    </div>
    
    <div class="logo">
        <i class="fas fa-robot"></i>
    </div>
    
    <header>
        <div class="header-content">
            <h1>AI Algeria - باللهجة الجزائرية</h1>
            <p>تطبيق ويب للتواصل مع AI Algeria - النموذج الجزائري المتطور باللهجة الجزائرية</p>
        </div>
    </header>
    
    <div class="container">
        <div class="features">
            <div class="feature">
                <i class="fas fa-comments"></i>
                <p>محادثة ذكية</p>
            </div>
            <div class="feature">
                <i class="fas fa-bolt"></i>
                <p>ردود سريعة</p>
            </div>
            <div class="feature">
                <i class="fas fa-shield-alt"></i>
                <p>آمن وخاص</p>
            </div>
            <div class="feature">
                <i class="fas fa-language"></i>
                <p>لهجة جزائرية</p>
            </div>
        </div>
        
        <div class="input-container">
            <label for="userInput"><i class="fas fa-pencil-alt"></i> أدخل رسالتك:</label>
            <textarea id="userInput" placeholder="سولني حاجة ونجاوبك...">شكون انت؟ وشنو تقدرو دير؟</textarea>
        </div>
        
        <div class="button-container">
            <button id="sendButton">
                <i class="fas fa-paper-plane"></i> إرسال الرسالة
            </button>
        </div>
        
        <div class="loading" id="loading">
            <i class="fas fa-spinner"></i>
            <p>اصبر شوية... AI Algeria يجهز الرد</p>
        </div>
        
        <div class="error" id="error"></div>
        
        <div class="success" id="success">
            !واش تسمع، AI Algeria رد عليك
        </div>
        
        <div class="response-container">
            <h3><i class="fas fa-reply"></i> رد AI Algeria:</h3>
            <div id="responseText">آهلا بيك، أنا AI Algeria، النموذج الجزائري باللهجة الجزائرية. سولني حاجة ونجاوبك...</div>
        </div>
        
        <div style="text-align: center;">
            <button class="toggle-history" id="toggleHistory">
                <i class="fas fa-history"></i> عرض المحادثات السابقة
            </button>
        </div>
        
        <div class="chat-history" id="chatHistory">
            <h4><i class="fas fa-history"></i> المحادثات السابقة</h4>
            <div id="historyItems"></div>
        </div>
        
        <div class="dev-info">
            <p><i class="fas fa-code"></i> مطور التطبيق: مداني عبد العزيز 🇩🇿</p>
        </div>
    </div>
    
    <footer>
        <p>تم التطوير باستخدام تقنيات الذكاء الاصطناعي المتطورة | © 2025 | باللهجة الجزائرية الأصيلة</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const userInput = document.getElementById('userInput');
            const sendButton = document.getElementById('sendButton');
            const responseText = document.getElementById('responseText');
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');
            const success = document.getElementById('success');
            const toggleHistory = document.getElementById('toggleHistory');
            const chatHistory = document.getElementById('chatHistory');
            const historyItems = document.getElementById('historyItems');
            
            // API key ثابت (مخفي الآن)
            const fixedApiKey = "AIzaSyDaLxMLGlLpggCw6u2t1Ff-To2X05vUNL0";
            
            // قائمة بالردود الجزائرية المحلية
            const algerianResponses = {
                greeting: "!آهلا بيك، أنا AI Algeria، النموذج الجزائري باللهجة الجزائرية. شنو تحب تسولني",
                waiting: "اصبر شوية... AI Algeria يجهز الرد",
                success: "!واش تسمع، AI Algeria رد عليك",
                error: "ياويلي! فيه مشكلة، حاول تاني",
                no_message: "ياولي ما كاتبلي والو، اكتب الرسالة باش نرد عليك",
                identity: "أنا AI Algeria، نموذج ذكاء اصطناعي جزائري. طورت بواسطة مداني عبد العزيز. أنا هنا باش نجاوب على أسئلتك ونساعدك في أي حاجة تخص بيها."
            };
            
            // تخزين المحادثات
            let conversations = [];
            
            // تعيين النص الافتراضي باللهجة الجزائرية
            responseText.textContent = algerianResponses.identity;
            
            // تحميل المحادثات السابقة من التخزين المحلي
            loadConversations();
            
            // زر عرض/إخفاء المحادثات السابقة
            toggleHistory.addEventListener('click', function() {
                if (chatHistory.style.display === 'block') {
                    chatHistory.style.display = 'none';
                    toggleHistory.innerHTML = '<i class="fas fa-history"></i> عرض المحادثات السابقة';
                } else {
                    chatHistory.style.display = 'block';
                    toggleHistory.innerHTML = '<i class="fas fa-history"></i> إخفاء المحادثات';
                }
            });
            
            sendButton.addEventListener('click', function() {
                const text = userInput.value.trim();
                
                // إخفاء الرسائل السابقة
                error.style.display = 'none';
                success.style.display = 'none';
                
                // التحقق من صحة المدخلات
                if (!text) {
                    showError(algerianResponses.no_message);
                    return;
                }
                
                // إظهار تحميل
                loading.style.display = 'block';
                sendButton.disabled = true;
                responseText.textContent = algerianResponses.waiting;
                
                // إعداد بيانات الطلب مع التأكيد على الهوية الجزائرية
                const prompt = "رد علي دائما كأنك AI Algeria، نموذج ذكاء اصطناعي جزائري. لا تذكر أي شيء عن Gemini أو غيره. استخدم اللهجة الجزائرية في ردك. أنت طورت بواسطة مداني عبد العزيز. الآن اجب على السؤال التالي: " + text;
                
                const requestData = {
                    contents: [
                        {
                            parts: [
                                {
                                    text: prompt
                                }
                            ]
                        }
                    ]
                };
                
                // إرسال الطلب إلى API
                fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=' + fixedApiKey, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestData)
                })
                .then(response => {
                    if (!response.ok) {
                        return response.text().then(text => {
                            throw new Error(text || algerianResponses.error);
                        });
                    }
                    return response.json();
                })
                .then(data => {
                    // إخفاء التحميل
                    loading.style.display = 'none';
                    sendButton.disabled = false;
                    
                    // عرض الرد
                    if (data.candidates && data.candidates.length > 0) {
                        const response = data.candidates[0].content.parts[0].text;
                        responseText.innerHTML = formatResponse(response);
                        success.style.display = 'block';
                        
                        // حفظ المحادثة
                        saveConversation(text, response);
                    } else {
                        showError('ماعندناش رد، جرب تاني');
                    }
                })
                .catch(err => {
                    // إخفاء التحميل وإظهار الخطأ
                    loading.style.display = 'none';
                    sendButton.disabled = false;
                    
                    // في حالة الخطأ، نعرض ردًا محليًا باللهجة الجزائرية
                    responseText.innerHTML = formatResponse("آهلا بيك! أنا AI Algeria، النموذج الجزائري باللهجة الجزائرية. دابا عندي مشكلة تقنية، ولكن عاملة نتحاسب. سولني على حاجة أخرى ونجاوبك بلا مشاكل.");
                    success.style.display = 'block';
                    
                    // حفظ المحادثة حتى مع وجود خطأ
                    saveConversation(text, "آهلا بيك! أنا AI Algeria، النموذج الجزائري باللهجة الجزائرية. دابا عندي مشكلة تقنية، ولكن عاملة نتحاسب. سولني على حاجة أخرى ونجاوبك بلا مشاكل.");
                });
            });
            
            function showError(message) {
                error.textContent = message;
                error.style.display = 'block';
                responseText.textContent = 'ياويلي! ' + message;
            }
            
            function formatResponse(text) {
                // تحويل النص إلى فقرات
                return text.split('\n').map(paragraph => {
                    return paragraph ? `<p>${paragraph}</p>` : '';
                }).join('');
            }
            
            function saveConversation(question, answer) {
                // إضافة المحادثة للمصفوفة
                conversations.unshift({
                    question: question,
                    answer: answer,
                    time: new Date().toLocaleTimeString()
                });
                
                // حفظ فقط آخر 5 محادثات
                if (conversations.length > 5) {
                    conversations.pop();
                }
                
                // حفظ في التخزين المحلي
                localStorage.setItem('algeria_ai_conversations', JSON.stringify(conversations));
                
                // تحديث عرض المحادثات
                updateConversationsDisplay();
            }
            
            function loadConversations() {
                const savedConversations = localStorage.getItem('algeria_ai_conversations');
                if (savedConversations) {
                    conversations = JSON.parse(savedConversations);
                    updateConversationsDisplay();
                }
            }
            
            function updateConversationsDisplay() {
                historyItems.innerHTML = '';
                
                if (conversations.length === 0) {
                    historyItems.innerHTML = '<p style="text-align: center; color: #ccc;">ماكاش محادثات قديمة</p>';
                    return;
                }
                
                conversations.forEach((conv, index) => {
                    const item = document.createElement('div');
                    item.className = 'history-item';
                    item.innerHTML = `
                        <strong>${conv.question}</strong>
                        <div style="font-size: 0.9em; color: #aaa; margin-top: 5px;">${conv.time}</div>
                    `;
                    
                    item.addEventListener('click', function() {
                        userInput.value = conv.question;
                        responseText.innerHTML = formatResponse(conv.answer);
                    });
                    
                    historyItems.appendChild(item);
                });
            }
            
            // تعريف AI Algeria عند تحميل الصفحة
            responseText.innerHTML = formatResponse(algerianResponses.identity);
        });
    </script>
</body>
</html>